(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{4688:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categories",function(){return r(1694)}])},1694:function(e,t,r){"use strict";r.r(t);var n=r(4051),a=r.n(n),o=r(5893),i=r(9008),c=r(7294),u=r(6597),s=r(1374),l=r(9692);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(){var e=(0,c.useState)(""),t=e[0],r=e[1],n=(0,c.useContext)(u.R),d=n.state,m=n.dispatch,y=d.categories,b=d.auth,x=(0,c.useState)(""),h=x[0],v=x[1],g=function(){var e,n=(e=a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"===b.user.role){e.next=2;break}return e.abrupt("return",m({type:"NOTIFY",payload:{error:"A autentica\xe7\xe3o n\xe3o \xe9 v\xe1lida."}}));case 2:if(t){e.next=4;break}return e.abrupt("return",m({type:"NOTIFY",payload:{error:"O nome n\xe3o pode ficar em branco."}}));case 4:if(m({type:"NOTIFY",payload:{loading:!0}}),!h){e.next=15;break}return e.next=9,(0,l.fP)("categories/".concat(h),{name:t},b.token);case 9:if(!(n=e.sent).err){e.next=12;break}return e.abrupt("return",m({type:"NOTIFY",payload:{error:n.err}}));case 12:m((0,s.$G)(y,h,n.category,"ADD_CATEGORIES")),e.next=21;break;case 15:return e.next=17,(0,l.qC)("categories",{name:t},b.token);case 17:if(!(n=e.sent).err){e.next=20;break}return e.abrupt("return",m({type:"NOTIFY",payload:{error:n.err}}));case 20:m({type:"ADD_CATEGORIES",payload:p(y).concat([n.newCategory])});case 21:return r(""),v(""),e.abrupt("return",m({type:"NOTIFY",payload:{success:n.msg}}));case 24:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){f(o,n,a,i,c,"next",e)}function c(e){f(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,o.jsxs)("div",{className:"col-md-6 mx-auto my-3",children:[(0,o.jsxs)(i.default,{children:[(0,o.jsx)("meta",{name:"facebook-domain-verification",content:"wrs2vl5k2z6jg7z3jggsa9cv2hzif3"}),(0,o.jsx)("title",{children:"Categories"})]}),(0,o.jsxs)("div",{className:"input-group mb-3",children:[(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"Add a new category",value:t,onChange:function(e){return r(e.target.value)}}),(0,o.jsx)("button",{className:"btn btn-secondary ml-1",onClick:g,children:h?"Update":"Create"})]}),y.map((function(e){return(0,o.jsx)("div",{className:"card my-2 text-capitalize",children:(0,o.jsxs)("div",{className:"card-body d-flex justify-content-between",children:[e.name,(0,o.jsxs)("div",{style:{cursor:"pointer"},children:[(0,o.jsx)("i",{className:"fas fa-edit mr-2 text-info",onClick:function(){return function(e){v(e._id),r(e.name)}(e)}}),(0,o.jsx)("i",{className:"fas fa-trash-alt text-danger","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){return m({type:"ADD_MODAL",payload:[{data:y,id:e._id,title:e.name,type:"ADD_CATEGORIES"}]})}})]})]})},e._id)}))]})}}},function(e){e.O(0,[774,888,179],(function(){return t=4688,e(e.s=t);var t}));var t=e.O();_N_E=t}]);